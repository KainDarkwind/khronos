$("#save-card").click(function () {
   $("#overlay-success").toggleClass("d-flex d-none");
});

$("#save-edit-card").click(function () {
   $("#overlay-fail").toggleClass("d-flex d-none");
});

$("#sign-up").click(function () {
   $("#sign-up-card").toggleClass("d-none");
   $("#intro-card").toggleClass("d-none");
});

$("#delete-button").click(function () {
   $("#delete-calendar").toggleClass("d-none");
});

$("#remove-event-1").click(function () {
   $("#list1").toggleClass("d-none");
});

$("#remove-event-2").click(function () {
   $("#list2").toggleClass("d-none");
});

// $(".cal-box").hover(function () {
//    $(".edit-banner").toggleClass("d-none");
// });

$("#cal-box-1").hover(function () {
   $("#cal-banner-1").toggleClass("d-none");
});

$("#cal-box-2").hover(function () {
   $("#cal-banner-2").toggleClass("d-none");
});

$("#cal-box-3").hover(function () {
   $("#cal-banner-3").toggleClass("d-none");
});

$("#cal-box-4").hover(function () {
   $("#cal-banner-4").toggleClass("d-none");
});

$("#cal-box-5").hover(function () {
   $("#cal-banner-5").toggleClass("d-none");
});

$("#cal-box-6").hover(function () {
   $("#cal-banner-6").toggleClass("d-none");
});

$("#cal-box-7").hover(function () {
   $("#cal-banner-7").toggleClass("d-none");
});

$("#cal-box-8").hover(function () {
   $("#cal-banner-8").toggleClass("d-none");
});

$("#cal-box-9").hover(function () {
   $("#cal-banner-9").toggleClass("d-none");
});

$("#cal-box-10").hover(function () {
   $("#cal-banner-10").toggleClass("d-none");
});

$("#cal-box-11").hover(function () {
   $("#cal-banner-11").toggleClass("d-none");
});

$("#cal-box-12").hover(function () {
   $("#cal-banner-12").toggleClass("d-none");
});

$("#cal-box-13").hover(function () {
   $("#cal-banner-13").toggleClass("d-none");
});

$("#cal-box-14").hover(function () {
   $("#cal-banner-14").toggleClass("d-none");
});

$("#cal-box-15").hover(function () {
   $("#cal-banner-15").toggleClass("d-none");
});

$("#cal-box-16").hover(function () {
   $("#cal-banner-16").toggleClass("d-none");
});

$("#cal-box-17").hover(function () {
   $("#cal-banner-17").toggleClass("d-none");
});

$("#cal-box-18").hover(function () {
   $("#cal-banner-18").toggleClass("d-none");
});

$("#cal-box-19").hover(function () {
   $("#cal-banner-19").toggleClass("d-none");
});

$("#cal-box-20").hover(function () {
   $("#cal-banner-20").toggleClass("d-none");
});

$("#cal-box-21").hover(function () {
   $("#cal-banner-21").toggleClass("d-none");
});

$("#cal-box-22").hover(function () {
   $("#cal-banner-22").toggleClass("d-none");
});

$("#cal-box-23").hover(function () {
   $("#cal-banner-23").toggleClass("d-none");
});

$("#cal-box-24").hover(function () {
   $("#cal-banner-24").toggleClass("d-none");
});

$("#cal-box-25").hover(function () {
   $("#cal-banner-25").toggleClass("d-none");
});

$("#cal-box-26").hover(function () {
   $("#cal-banner-26").toggleClass("d-none");
});

$("#cal-box-27").hover(function () {
   $("#cal-banner-27").toggleClass("d-none");
});

$("#cal-box-28").hover(function () {
   $("#cal-banner-28").toggleClass("d-none");
});

$("#cal-box-29").hover(function () {
   $("#cal-banner-29").toggleClass("d-none");
});

$("#cal-box-30").hover(function () {
   $("#cal-banner-30").toggleClass("d-none");
});

$("#cal-box-31").hover(function () {
   $("#cal-banner-31").toggleClass("d-none");
});

$("#cal-box-32").hover(function () {
   $("#cal-banner-32").toggleClass("d-none");
});

$("#cal-box-33").hover(function () {
   $("#cal-banner-33").toggleClass("d-none");
});

$("#cal-box-34").hover(function () {
   $("#cal-banner-34").toggleClass("d-none");
});

$("#cal-box-35").hover(function () {
   $("#cal-banner-35").toggleClass("d-none");
});

$("#cal-box-36").hover(function () {
   $("#cal-banner-36").toggleClass("d-none");
});

$("#cal-box-37").hover(function () {
   $("#cal-banner-37").toggleClass("d-none");
});

$("#cal-box-38").hover(function () {
   $("#cal-banner-38").toggleClass("d-none");
});

$("#cal-box-39").hover(function () {
   $("#cal-banner-39").toggleClass("d-none");
});

$("#cal-box-1-2").hover(function () {
   $("#cal-banner-1-2").toggleClass("d-none");
});

$("#cal-box-2-2").hover(function () {
   $("#cal-banner-2-2").toggleClass("d-none");
});

$("#cal-box-3-2").hover(function () {
   $("#cal-banner-3-2").toggleClass("d-none");
});

$("#cal-box-4-2").hover(function () {
   $("#cal-banner-4-2").toggleClass("d-none");
});

$("#cal-box-5-2").hover(function () {
   $("#cal-banner-5-2").toggleClass("d-none");
});

$("#cal-box-6-2").hover(function () {
   $("#cal-banner-6-2").toggleClass("d-none");
});

$("#cal-box-7-2").hover(function () {
   $("#cal-banner-7-2").toggleClass("d-none");
});

$("#cal-box-8-2").hover(function () {
   $("#cal-banner-8-2").toggleClass("d-none");
});

$("#cal-box-9-2").hover(function () {
   $("#cal-banner-9-2").toggleClass("d-none");
});

$("#cal-box-10-2").hover(function () {
   $("#cal-banner-10-2").toggleClass("d-none");
});

$("#cal-box-1-3").hover(function () {
   $("#cal-banner-1-3").toggleClass("d-none");
});

$("#cal-box-2-3").hover(function () {
   $("#cal-banner-2-3").toggleClass("d-none");
});

$("#cal-box-3-3").hover(function () {
   $("#cal-banner-3-3").toggleClass("d-none");
});

$("#cal-box-4-3").hover(function () {
   $("#cal-banner-4-3").toggleClass("d-none");
});

$("#cal-box-5-3").hover(function () {
   $("#cal-banner-5-3").toggleClass("d-none");
});

$("#cal-box-6-3").hover(function () {
   $("#cal-banner-6-3").toggleClass("d-none");
});

$("#cal-box-7-3").hover(function () {
   $("#cal-banner-7-3").toggleClass("d-none");
});

$("#cal-box-8-3").hover(function () {
   $("#cal-banner-8-3").toggleClass("d-none");
});

$("#cal-box-9-3").hover(function () {
   $("#cal-banner-9-3").toggleClass("d-none");
});

$("#cal-box-10-3").hover(function () {
   $("#cal-banner-10-3").toggleClass("d-none");
});

$("#add-weekday2").click(function () {
   $("#weekday2").toggleClass("d-none");
   $("#add-weekday3").removeClass("d-none");
   $("#add-weekday2").addClass("d-none");
});

$("#add-weekday3").click(function () {
   $("#weekday3").toggleClass("d-none");
   $("#add-weekday4").removeClass("d-none");
   $("#add-weekday3").addClass("d-none");
});

$("#add-weekday4").click(function () {
   $("#weekday4").toggleClass("d-none");
});

// let createAnswerInputCharsCount = 0;
// $("#create-answer-input").keypress(function () {
//    createAnswerInputCharsCount += 1;

//    const maxChars = 240;
//    console.log("add it", createAnswerInputCharsCount);
//    $("#create-answer-char-count").html(createAnswerInputCharsCount);
// });

// Going to be a character counter once feedback video viewed

let editEventCharsCount = 0;
$("#add-new-event").keyup(function (e) {
   console.log("Event", e);

   //get the text from textarea

   const text = e.target.value;
   console.log(`inputted: ${text}`);

   //check the length of the text

   const textLength = text.length;
   console.log(`The length is: ${textLength}`);

   if (textLength === 0) {
      console.log("no text entered");
      $("#save-event").addClass("disabled");
   } else if (textLength > 240) {
      console.log("too much entered");
      $("#save-event").addClass("disabled");
      $("#edit-event-char-count").addClass("text-danger");
   } else if (textLength > 0 || textLength <= 240) {
      console.log("just right");
      $("#save-event").removeClass("disabled");
      $("#edit-event-char-count").removeClass("text-danger");
   }

   //update the character counter on the page
   $("#edit-event-char-count").html(textLength);
});

$("#lets-go").click(function (e) {
   console.log("Event", e);

   //check if email empty

   const emailInput = $("#sign-up-email").val();
   const trimmedEmailInput = emailInput.trim();
   const normalizedEmailInput = trimmedEmailInput.toLowerCase();
   const emailLength = normalizedEmailInput.length;
   const delimiter = "@";
   const indexOfLocal = normalizedEmailInput.indexOf(delimiter);
   const indexofDomain = normalizedEmailInput.lastIndexOf(delimiter);
   const localEmail = normalizedEmailInput.slice(0, indexOfLocal);
   const domainEmail = normalizedEmailInput.slice(0, indexofDomain);
   const clickedAt = new Date(Date.now());
   const year = clickedAt.getFullYear();
   const month = clickedAt.getMonth();
   const day = clickedAt.getDate();

   // const hour = clickedAt.getHours();
   // const minutes = clickedAt.getMinutes();
   // const seconds = clickedAt.getSeconds();
   // const milliseconds = clickedAt.getMilliseconds();

   const formattedYear = String(year);
   const formattedMonth = String(month + 1);
   const formattedDay = String(day);
   const padding = `0`;

   //Possible options.  2 digit month, 2 digit day.  All good.
   // 1 digit month, 2 digit day.  Pad month
   // 2 digit month, 1 digit day.  Pad day.
   // 1 digit month, 1 digit day.  Pad both.

   if (formattedMonth.length !== 2 && formattedDay.length !== 2) {
      const createdAt =
         formattedYear + padding + formattedMonth + padding + formattedDay;
      console.log(`Created at`, createdAt);
   } else if (formattedMonth.length !== 2) {
      const createdAt = formattedYear + padding + formattedMonth + formattedDay;
      console.log(`Created at`, createdAt);
   } else if (formattedDay.length !== 2) {
      const createdAt = formattedYear + formattedMonth + padding + formattedDay;
      console.log(`Created at`, createdAt);
   } else {
      const createdAt = formattedYear + formattedMonth + formattedDay;
      console.log(`Created at`, createdAt);
   }
   // console log 'unacceptablePasswords'
   // this is made by concating most and secondMostInsecure passwords.
   //Remove obama2016 and skywalker

   // const spreadMostInsecurePasswords = [...mostInsecurePasswords];
   // // console.log(spreadMostInsecurePasswords);

   // const firstPassword = mostInsecurePasswords[0];
   // // console.log(`The first password in this array is ${firstPassword}.`);
   // const passwordsLength = mostInsecurePasswords.length;
   // // console.log(`The length of this array is ${passwordsLength}.`);

   const allBadPasswords = mostInsecurePasswords.concat(
      secondMostInsecurePasswords
   );
   // console.log(
   //    `This should be a combined list of the two lists`,
   //    allBadPasswords
   // );

   const allFlatBadPasswords = allBadPasswords.flat();
   // console.log(`The flattened bad passwords are:`, allFlatBadPasswords);

   const allUniqBadPasswords = [...new Set(allFlatBadPasswords)];
   // console.log(
   //    `This should be only unique value bad passwords`,
   //    allUniqBadPasswords
   // );

   const firstBadPasswords = allUniqBadPasswords.slice(
      0,
      allUniqBadPasswords.indexOf("skywalker")
   );
   // console.log(`Here are the first passwords`, firstBadPasswords);

   const secondBadPasswords = allUniqBadPasswords.slice(
      allUniqBadPasswords.indexOf("skywalker") + 1,
      allUniqBadPasswords.indexOf("obama2016")
   );
   // console.log(`Here are the second set of passwords`, secondBadPasswords);

   const thirdBadPasswords = allUniqBadPasswords.slice(
      allUniqBadPasswords.indexOf("obama2016") + 1
   );
   // console.log(`Here are the third set of passwords`, thirdBadPasswords);

   const allCleanedBadPasswords = firstBadPasswords.concat(
      secondBadPasswords,
      thirdBadPasswords
   );

   //get rid of true and false
   let removedBooleanBadPasswords = [];
   for (let i = 0; i < allCleanedBadPasswords.length; i++) {
      //This returns elements in allCleanedBadPasswords on separate lines.

      const cleanBadPassword = allCleanedBadPasswords[i];
      // console.log(`This returns a bad password`, cleanBadPassword);
      const cleanBadPasswordType = typeof cleanBadPassword;
      // console.log(`This is the element type`, cleanBadPasswordType);

      if (cleanBadPasswordType !== "boolean") {
         removedBooleanBadPasswords = removedBooleanBadPasswords.concat([
            cleanBadPassword,
         ]);
      }
   } //Returns a list with true and false removed called removedbooleanBadPasswords.

   //turn number values into string values.
   let normalizedBadPasswords = [];
   for (let i = 0; i < removedBooleanBadPasswords.length; i++) {
      //This returns elements in removedBooleanBadPasswords on separate lines.

      const stringBadPassword = String(removedBooleanBadPasswords[i]);
      const lowerCasedBadPassword = stringBadPassword.toLowerCase();

      normalizedBadPasswords = normalizedBadPasswords.concat([
         lowerCasedBadPassword,
      ]);
   }
   //This produces an array of normalized bad passwords, ready to be reversed called normalizedBadPasswords.

   let penultimateList = [];
   let unacceptablePasswords = [];
   //make the final list include reversed password values.
   for (let i = 0; i < normalizedBadPasswords.length; i++) {
      const normalizedBadPassword = normalizedBadPasswords[i];
      const splitBadPassword = normalizedBadPassword.split("");
      const copyOfSplitBadPassword = [...splitBadPassword]; //Makes copy that can be reversed without adjusting original.
      const reverseSplitBadPassword = copyOfSplitBadPassword.reverse();
      const reverseSplitBadPasswordWhole = [reverseSplitBadPassword.join("")]; //reversed passwords put back together

      penultimateList = penultimateList.concat(reverseSplitBadPasswordWhole); //reversed passwords put back into an array.

      unacceptablePasswords = penultimateList.concat(normalizedBadPasswords); //reversed and regular arrays joined into a single one.
   }

   console.log(`These are unacceptable passwords:`, unacceptablePasswords);

   if (emailLength === 0) {
      console.log("no email entered");
      //remove d-none from #email-warning,  add class 'is-invalid' to #sign-up-email
      $("#email-warning").removeClass("d-none");
      $("#email-warning").html("Please enter your email.");
      $("#sign-up-email").addClass("is-invalid");
   } else if (emailLength > 0) {
      console.log("email just right");
      $("#email-warning").addClass("d-none");
      $("#sign-up-email").removeClass("is-invalid");
   }

   //check if password empty

   const passwordTyped = $("#sign-up-password").val();
   const stringPassword = String(passwordTyped);
   const passwordInput = stringPassword.toLowerCase();
   const passwordLength = passwordInput.length;

   console.log(`password input: ${passwordInput}`);
   emailToSearchFor = "localEmail";

   if (passwordLength === 0) {
      console.log("no password entered");
      //remove d-none from #no-email-warning  add class 'is-invalid' to #sign-up-email
      $("#password-warning").removeClass("d-none");
      $("#password-warning").html("Please create a password.");
      $("#sign-up-password").addClass("is-invalid");
   } else if (passwordLength < 9) {
      console.log("short password entered");
      $("#password-warning").removeClass("d-none");
      $("#password-warning").html(
         "Your password must be at least 9 characters."
      );
      $("#sign-up-password").addClass("is-invalid");
   } else if (passwordInput.includes(localEmail)) {
      console.log("password contains email");
      $("#password-warning").removeClass("d-none");
      $("#sign-up-password").addClass("is-invalid");
      $("#password-warning").html(
         "All or part of your email address cannot be used in your password."
      );
   } else if (unacceptablePasswords.includes(passwordInput)) {
      console.log("password contains insecure password");
      $("#password-warning").removeClass("d-none");
      $("#sign-up-password").addClass("is-invalid");
      $("#password-warning").html(
         `Your password contains a commonly used password, ${passwordInput} and can be easily discovered by attackers. Please use something else.`
      );
   } else if (passwordLength > 8) {
      console.log("just right password");
      $("#password-warning").addClass("d-none");
      $("#sign-up-password").removeClass("is-invalid");
   }
});
